<emp-ng-card
  title='Nueva póliza'
  hint='Información general de la póliza'
  (cardClose)="onClose()">

  <div class="card-body-padding" [empNgSpinnerHost]="spinner">

    <emp-ng-spinner #spinner [visible]="submitted">

    </emp-ng-spinner>   

    <form [formGroup]="formHandler.form"  autocomplete="off"  class="form-section">

      <div fxLayout="column" fxLayout.lt-md="column" fxLayoutGap="0.75rem" fxLayoutGap.lt-md="0">

        <div fxLayout="row" fxLayout.lt-md="column">
                
         <div fxFlex="400px">
              <label for="full-name">Nombre del Contratante:</label>
              <input type="text" id="full-name" class="text-box"
               [formControlName]="controls.contractor"
               [class.invalid-control]="formHandler.showInvalidControl(controls.contractor)">
          </div>
          <div fxFlex="415px">
              <label for="email">Correo electrónico:</label>
              <input type="text" id="email" class="text-box"
               [formControlName]="controls.email">
          </div>
        </div>

        <div fxLayout="row" fxLayout.lt-md="column">
          <div fxFlex="400px">
            <label>Domicilio:</label>
            <textarea class="text-area" empNgTextareaAutoresize rows="1"
              [formControlName]="controls.address"
              [class.invalid-control]="formHandler.showInvalidControl(controls.address)">
          </textarea>
          </div>
          <div fxFlex="215px">
            <label for="city">Ciudad:</label>
            <input type="text" id="city" class="text-box"
            [formControlName]="controls.city"
            [class.invalid-control]="formHandler.showInvalidControl(controls.city)">
            
          </div>
          <div fxFlex="200px">
            <label for="state">Estado:</label>
            <input type="text" id="state" class="text-box"
            [formControlName]="controls.state"
            [class.invalid-control]="formHandler.showInvalidControl(controls.state)">
          </div>
          
        </div>

        <div fxLayout="row" fxLayout.lt-md="column">
          <div fxFlex="100px">
            <label for="cp">Código postal:</label>
            <input type="text" id="cp" class="text-box"
            [formControlName]="controls.zip"
            [class.invalid-control]="formHandler.showInvalidControl(controls.zip)">
          </div>
          
          <div fxFlex="130px" fxFlex.lt-md="none">
            <label>Fecha de nacimiento:</label>
            <emp-ng-datepicker
              [formControlName]="controls.dateOfBirth"
              [showError]="formHandler.showInvalidControl(controls.dateOfBirth)">
  
            </emp-ng-datepicker>
          </div>
          <div fxFlex="170px">
          <label>Sexo:</label>
          <emp-ng-select  
            [config]="{clearable: true}"      
            [formControlName]="controls.gender"  
            [items]="[{uid: '1', name: 'Masculino'}, {uid: '2',name: 'Femenino'} ]" 
            [showError]="formHandler.showInvalidControl(controls.gender)">
          </emp-ng-select>
        </div>
          <div fxFlex="200px">
            <label>RFC:</label>
            <input type="rfc" id="rfc" class="text-box"
            [formControlName]="controls.RFC">
          
          </div>
          <div fxFlex="215px">
            <label for="curp">CURP:</label>
            <input type="text" id="curp" class="text-box"
            [formControlName]="controls.CURP">
            
          </div>          
          
        </div>

        <div fxLayout="row" fxLayout.lt-md="column">
          <div fxFlex="215px">
            <label>INE:</label>
            <input type="rfc" id="rfc" class="text-box"
            [formControlName]="controls.INE">
          </div>
          <div fxFlex="300px">
            <label>Tel particular:</label>
            <input type="rfc" id="rfc" class="text-box"
            [formControlName]="controls.phone">
          </div>
          <div fxFlex="300px">
            <label>Celular:</label>
            <input type="rfc" id="rfc" class="text-box"
            [formControlName]="controls.cellPhone"
            [class.invalid-control]="formHandler.showInvalidControl(controls.cellPhone)">
          </div>
        </div>
      
      <mat-divider class="horizontal"></mat-divider>

        <div fxLayout="row" fxLayout.lt-md="column">

          <div fxFlex="400px">
            <label>Tipo de plan:</label>
            <emp-ng-select  
              [config]="{clearable: true}"        
              [formControlName]="controls.contractType"                              
              [items]="contractTypes"
              [showError]="formHandler.showInvalidControl(controls.contractType)">
            </emp-ng-select>
          </div>
          <div fxFlex="415px">
            <label>Forma de pago:</label>
            <emp-ng-select  
              [config]="{clearable: true}"            
              [formControlName]="controls.paymentType"
              [items]="paymentTypes"
              [showError]="formHandler.showInvalidControl(controls.paymentType)">
            </emp-ng-select>
         </div>         

        </div>

        <div fxLayout="row" fxLayout.lt-md="column">

          <div fxFlex="815px">
            <label>Persona designada (Beneficiaria):</label>
            <input type="text" class="text-box"
            [formControlName]="controls.beneficiary"
            [class.invalid-control]="formHandler.showInvalidControl(controls.beneficiary)">
          </div>
              

        </div>



        <mat-divider class="horizontal"></mat-divider>

        <div fxLayout="row" fxLayout.lt-md="column">
          <div fxFlex fxLayoutAlign="end center">
              <button type="submit"
                [class.btn-action]="formHandler.form.valid"
                [disabled]="formHandler.form.invalid"
                (click)="onSave()">
                Guardar
              </button>
          </div>    
        </div>

      </div>  

    </form>

  </div>

</emp-ng-card>
